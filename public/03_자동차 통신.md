---
layout: post
title: 자동차 통신 프로토콜 [3] | FlexRay
subtitle: "자동차에선 어떤 통신들이 이루어지는가??"
type: "auto"
createDate: 2021-10-09
public: true
text: true
author: yoncho
post-header: false
header-img: ""
order: 3
---

## 자동차에선 무슨 통신이 이루어질까??

### 1. CAN
### 2. LIN
### 3. FlexRay  <<  


## 3.0 FlexRay 
차량에서 많은 장치들끼리 통신은 주로 CAN을 통해서 이루어지며,  
간단한 통신이 필요한 장치들은 LIN을 통해 이루어진다.  
차량 안에 들어가는 장치들간 이루어지는 통신에서 데이터의 양들이  
점점 증가하고 한정된 시간에 전송해야할 데이터가 증가하면서  
시간 결정과 오류 한계등 관련 수요를 해결해야하는데.  
이를 해결하기위해 FlexRay프로토콜이 나타났다.  
FlexRay는 **내고장성 고속 버스 시스템**이다.   
x-by-wire App을 위한 오류 허용과 시간 확정 성능을 제공한다.  

FlexRay는 Drive-by-Wire, 액티브 서스펜션, 적응 크루즈 컨트롤에 사용된다.  

## 3.1 특징  
1. X-by-Wire를 위한 LAN 통신
: 차량의 고속 제어를 위한 통신 인프라 제공, 타임 트리거 프로토콜로 주기적 전송되는 데이터 전송 방식을 제공, 최대 10Mbps속도다.  
2. 고신뢰성 프로토콜 
: 완전한 이중화 네트워크 구축 가능, 하드웨어에 의한 스케줄 감시 가능  
3. 유연한 토폴로지 지원  
: 버스형, 스타형, 하이브리드형의 토폴로지 지원  

## 3.2 FlexRay 토폴로지
차량의 레이아웃과  FlexRay사용 정도에 따라 적합한 토폴로지를  
선택해서 성능과 안정성을 최적화 할 수 있다.  

1. 멀티드롭 버스  
CAN, LIN과 동일한 토폴로지이다.  
여러  ECU들이 단일 네트워크 케이블에 연결되어있다.  
네트워크 끝엔 터미네이션 저항기가 있어서, 신호반향 문제를 해결한다.  

2. 스타 네트워크  
FlexRay 표준은 중앙 활성 노드에 개별 연결되는 스타구성을 지원한다.  
장거리 실행이 가능하며, 네트워크 한 부분에서 오류가 발생해도 신뢰할 수 있다.  

3. 하이브리드 네트워크  
멀티드롭 버스와 스타 네트워크가 합쳐진 것으로,   
편리한 사용과 버스 비용 절감을 위해 하이브리드를  
주로 사용할 것이다.  

## 3.3 FlexRay 버스 동작 원리
CAN프로토콜은 CSMA윈칙에 따라 작동한다.  
즉, 노드가 버스 상태를 보다가 버스가 유휴(사용가능한)상태면  
메시지를 즉시 전송한다.   
이렇게되면, 메시지는 우선순위에 의해 충돌은 방지되지만  
메시지가 버스 상에 있는 시간은 알 수 없다.  
**FlexRay**는 **TDMA**(Time Division Multiple Access)원치에 따라  
동작한다. 즉, 노드들이 정해진 시간에 메시지를 전송할 수 있는 것이다.  
메시지간 충돌은 당연히 예방되며, 메시지가 버스상에 있는 시간 또한  
알 수 있게된다.  
FlexRay는 시간 결정성과 메시지의 일관성을 보장해준다.  

## 3.4 FlexRay 통신 사이클  








<hr>
참고   
[CAN, LIN, FLEXRAY] fescaro_blog    
https://www.fescaro.com/ko/archives/tag/%EC%9E%90%EB%8F%99%EC%B0%A8-%ED%86%B5%EC%8B%A0-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C%EC%9D%98-%EC%A2%85%EB%A5%98



